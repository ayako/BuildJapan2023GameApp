<!-- 
HTML と JavaScript で動くシューティングゲームのコードを生成してください。
コードは一つの HTML ファイルにしてください。
-->
<!DOCTYPE html>
<html>
<head>
    <title>Shooting Game</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="500" height="500"></canvas>
    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        // Player object
        const player = {
            x: canvas.width / 2,
            y: canvas.height - 30,
            radius: 10,
            dx: 0,
            dy: 0,
            speed: 5,
            shoot: function() {
                bullets.push(new Bullet(this.x, this.y));
            }
        };

        // Bullet object
        function Bullet(x, y) {
            this.x = x;
            this.y = y;
            this.radius = 5;
            this.dy = -10;
            this.draw = function() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = "red";
                ctx.fill();
                ctx.closePath();
            }
        }

        // Bullets array
        const bullets = [];

        // Draw player
        function drawPlayer() {
            ctx.beginPath();
            ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
            ctx.fillStyle = "blue";
            ctx.fill();
            ctx.closePath();
        }

        // Draw bullets
        function drawBullets() {
            bullets.forEach(function(bullet) {
                bullet.draw();
            });
        }

        // Move player
        function movePlayer() {
            player.x += player.dx;
            player.y += player.dy;

            // Check boundaries
            if (player.x < player.radius) {
                player.x = player.radius;
            }
            if (player.x > canvas.width - player.radius) {
                player.x = canvas.width - player.radius;
            }
            if (player.y < player.radius) {
                player.y = player.radius;
            }
            if (player.y > canvas.height - player.radius) {
                player.y = canvas.height - player.radius;
            }
        }

        // Move bullets
        function moveBullets() {
            bullets.forEach(function(bullet) {
                bullet.y += bullet.dy;
            });
        }

        // Check collision
        function checkCollision() {
            bullets.forEach(function(bullet, bulletIndex) {
                if (bullet.y < 0) {
                    bullets.splice(bulletIndex, 1);
                }
            });
        }

        // Update canvas
        function updateCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPlayer();
            drawBullets();
            movePlayer();
            moveBullets();
            checkCollision();
        }

        // Keydown event listener
        document.addEventListener("keydown", function(event) {
            switch (event.keyCode) {
                case 37: // Left arrow
                    player.dx = -player.speed;
                    break;
                case 38: // Up arrow
                    player.dy = -player.speed;
                    break;
                case 39: // Right arrow
                    player.dx = player.speed;
                    break;
                case 40: // Down arrow
                    player.dy = player.speed;
                    break;
                case 32: // Spacebar
                    player.shoot();
                    break;
            }
        });

        // Keyup event listener
        document.addEventListener("keyup", function(event) {
            switch (event.keyCode) {
                case 37: // Left arrow
                    player.dx = 0;
                    break;
                case 38: // Up arrow
                    player.dy = 0;
                    break;
                case 39: // Right arrow
                    player.dx = 0;
                    break;
                case 40: // Down arrow
                    player.dy = 0;
                    break;
            }
        });

        // Game loop
        setInterval(updateCanvas, 10);
    </script>
</body>
</html>